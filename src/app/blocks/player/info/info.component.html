<div class="w-full h-full p-4 rounded-lg flex flex-col gap-y-4">
  <!-- <button
    *ngIf="mediaType == 'tv'"
    (click)="closeInfo()"
    title="Close"
    class="ml-auto w-fit bg-gray-200 transform duration-200 hover:text-gray-600 active:bg-gray-100 p-1.5 rounded-full cursor-pointer"
  >
    <app-icon-lib ico="close" class="w-5 h-5"></app-icon-lib>
  </button> -->
  <section
    class="flex flex-col sm:flex-row sm:items-start sm:justify-between pb-4 mb-4 border-b border-gray-200"
  >
    <div class="flex-1 sm:mr-4 mb-4 sm:mb-0">
      <h2 class="text-2xl font-bold text-gray-900">
        {{ responseData?.name || responseData?.title || "Loading..." }}
      </h2>
      <p class="mt-1 text-base text-gray-600">
        {{ responseData?.tagline }}
      </p>
    </div>
    <div
      class="self-center sm:self-auto w-full sm:w-1/4 lg:w-1/3 max-w-xs sm:max-w-none"
    >
      <div class="aspect-w-2 aspect-h-3">
        <img
          class="object-cover border border-gray-300 rounded-md shadow-md w-full h-full"
          [src]="
            responseData?.poster_path
              ? 'https://image.tmdb.org/t/p/w300/' + responseData.poster_path
              : './assets/placeholder.png'
          "
          [alt]="
            'Poster for ' +
            (responseData?.name || responseData?.title || 'Media')
          "
        />
      </div>
    </div>
  </section>

  <section class="flex flex-wrap gap-2 mb-4">
    <ng-container
      *ngIf="responseData?.first_air_date || responseData?.release_date"
    >
      <span
        class="inline-flex items-center bg-blue-100 text-blue-800 text-xs font-semibold px-3 py-1 rounded-full cursor-default"
        [title]="
          responseData?.first_air_date ? 'First Air Date' : 'Release Date'
        "
      >
        <app-icon-lib ico="calendar" class="h-3.5 w-3.5 mr-1.5"></app-icon-lib>
        {{
          responseData?.first_air_date || responseData?.release_date
            | date : "mediumDate"
        }}
      </span>
    </ng-container>

    <ng-container *ngIf="responseData?.number_of_seasons">
      <span
        class="inline-flex items-center bg-purple-100 text-purple-800 text-xs font-semibold px-3 py-1 rounded-full cursor-default"
        title="Total Seasons"
      >
        <app-icon-lib ico="seasons" class="h-3.5 w-3.5 mr-1.5"></app-icon-lib>
        {{ responseData.number_of_seasons }}
        {{ responseData.number_of_seasons === 1 ? "Season" : "Seasons" }}
      </span>
    </ng-container>

    <ng-container *ngIf="responseData?.number_of_episodes">
      <span
        class="inline-flex items-center bg-indigo-100 text-indigo-800 text-xs font-semibold px-3 py-1 rounded-full cursor-default"
        title="Total Episodes"
      >
        <app-icon-lib ico="episodes" class="h-3.5 w-3.5 mr-1.5"></app-icon-lib>
        {{ responseData.number_of_episodes }}
        {{ responseData.number_of_episodes === 1 ? "Episode" : "Episodes" }}
      </span>
    </ng-container>

    <ng-container *ngIf="responseData?.status">
      <span
        class="inline-flex items-center 
          {{
          responseData.status === 'Ended' || responseData.status === 'Canceled'
            ? 'bg-red-100 text-red-700'
            : 'bg-green-100 text-green-700'
        }} 
          text-xs font-semibold px-3 py-1 rounded-full cursor-default"
        title="Status"
      >
        <app-icon-lib ico="status" class="h-3.5 w-3.5 mr-1.5"></app-icon-lib>
        {{ responseData.status }}
      </span>
    </ng-container>

    <ng-container *ngIf="responseData?.media_type">
      <span
        class="inline-flex items-center 
          {{
          responseData.media_type === 'tv'
            ? 'bg-blue-100 text-blue-700'
            : 'bg-yellow-100 text-yellow-700'
        }}
          text-xs font-semibold px-3 py-1 rounded-full cursor-default"
        title="Media Type"
      >
        <app-icon-lib ico="mediatype" class="h-3.5 w-3.5 mr-1.5"></app-icon-lib>
        {{ responseData.media_type }}
      </span>
    </ng-container>

    <ng-container
      *ngIf="responseData?.runtime || responseData?.episode_run_time?.length"
    >
      <span
        class="inline-flex items-center bg-pink-100 text-pink-800 text-xs font-semibold px-3 py-1 rounded-full cursor-default"
        [title]="
          responseData?.runtime ? 'Movie Runtime' : 'Avg. Episode Runtime'
        "
      >
        <app-icon-lib ico="runtime" class="h-3.5 w-3.5 mr-1.5"></app-icon-lib>
        {{ responseData?.runtime || (responseData?.episode_run_time?.[0] || 'N/A') }}
        min
      </span>
    </ng-container>
  </section>

  <ng-container *ngIf="responseData?.status || responseData?.networks?.length">
    <section
      *ngIf="responseData?.overview"
      class="p-3 border border-gray-200 rounded-md"
    >
      <h3 class="mb-1 text-sm font-semibold text-gray-700">Overview</h3>
      <p class="text-sm text-gray-800 leading-relaxed">
        {{ responseData.overview }}
      </p>
    </section>

    <section
      class="p-4 bg-gray-50 rounded-md border border-gray-200 flex flex-col gap-y-3"
    >
      <!-- <div
        *ngIf="responseData?.status"
        class="flex items-center justify-between"
      >
        <span class="text-sm font-semibold text-gray-700">Status</span>
        <span
          class="px-3 py-0.5 text-xs font-medium rounded-full
             {{
            responseData.status === 'Ended' ||
            responseData.status === 'Canceled'
              ? 'bg-red-100 text-red-700'
              : 'bg-green-100 text-green-700'
          }}"
        >
          {{ responseData.status }}
        </span>
      </div> -->
      <div class="flex items-center">
        <span class="mr-2 text-sm font-semibold text-gray-700">Network</span>
        <span class="text-sm text-gray-800">
          {{
            responseData?.networks?.length ? responseData.networks[0].name : ""
          }}
          <span *ngIf="responseData.origin_country?.length">
            ({{ responseData.origin_country[0] }})
          </span>
        </span>
      </div>
    </section>
  </ng-container>

  <section
    *ngIf="responseData?.vote_average"
    class="p-3 border border-gray-200 rounded-md"
  >
    <div class="flex items-center gap-2 text-sm">
      <app-icon-lib ico="star" class="w-5 h-5 text-yellow-500"></app-icon-lib>
      <span class="font-semibold text-gray-900"
        >{{ responseData.vote_average.toFixed(1) }}/10</span
      >
      <span class="text-gray-600"
        >({{ responseData.vote_count | number }} votes)</span
      >
    </div>
  </section>

  <ng-container *ngIf="responseData?.last_episode_to_air">
    <section class="p-3 border border-gray-200 rounded-md">
      <h3 class="mb-2 text-sm font-semibold text-gray-700">Latest Episode</h3>
      <div class="flex items-center gap-3">
        <span
          class="px-2 py-1 text-xs font-medium text-gray-700 bg-gray-200 rounded"
        >
          S{{
            responseData.last_episode_to_air.season_number | number : "2.0-0"
          }}
          E{{
            responseData.last_episode_to_air.episode_number | number : "2.0-0"
          }}
        </span>
        <div class="flex-1 min-w-0">
          <p class="text-sm font-medium text-gray-900 truncate">
            {{ responseData.last_episode_to_air.name }}
          </p>
          <p class="text-xs text-gray-600">
            {{
              responseData.last_episode_to_air.air_date | date : "mediumDate"
            }}
            <span *ngIf="responseData.last_episode_to_air.runtime">
              â€¢ {{ responseData.last_episode_to_air.runtime }} min
            </span>
          </p>
        </div>
      </div>
    </section>
  </ng-container>

  <section
    *ngIf="responseData?.genres?.length"
    class="p-3 border border-gray-200 rounded-md"
  >
    <h3 class="mb-2 text-sm font-semibold text-gray-700">Genres</h3>
    <div class="flex flex-wrap gap-2">
      <span
        *ngFor="let genre of responseData.genres"
        class="px-2 py-1 text-xs font-medium text-gray-700 bg-gray-200 rounded"
      >
        {{ genre.name }}
      </span>
    </div>
  </section>

  <section class="p-3 border border-gray-200 rounded-md">
    <h3 class="mb-2 text-sm font-semibold text-gray-700">Additional Info</h3>
    <div class="flex flex-col gap-y-2 text-sm text-gray-700">
      <div *ngIf="responseData?.created_by?.length">
        <span class="font-medium text-gray-900">Created By:</span>
        <span class="ml-1 text-gray-800">
          <ng-container
            *ngFor="let creator of responseData.created_by; let isLast = last"
          >
            {{ creator.name }}<span *ngIf="!isLast">, </span>
          </ng-container>
        </span>
      </div>

      <div *ngIf="responseData?.spoken_languages?.length">
        <span class="font-medium text-gray-900">Languages:</span>
        <span class="ml-1 text-gray-800">
          <ng-container
            *ngFor="
              let language of responseData.spoken_languages;
              let isLast = last
            "
          >
            {{ language.english_name || language.name
            }}<span *ngIf="!isLast">, </span>
          </ng-container>
        </span>
      </div>

      <div *ngIf="responseData?.homepage">
        <span class="font-medium text-gray-900">Homepage:</span>
        <a
          [href]="responseData.homepage"
          target="_blank"
          rel="noopener noreferrer"
          class="ml-1 text-blue-600 hover:underline break-all"
        >
          {{ responseData.homepage }}
        </a>
      </div>
    </div>
  </section>
  <div class="p-1"></div>
</div>
