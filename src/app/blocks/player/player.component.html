<app-player-header [responseData]="responseData" class="hidden">
</app-player-header>
<div class="flex flex-col lg:flex-row gap-4 p-4 md:p-4">
  <div class="w-full lg:w-3/4 lg:aspect-video rounded-xl">
    <!-- <ng-container *ngIf="showIframe">
        <iframe
          #iframeElement
          [src]="iframeUrl"
          class="w-full aspect-video rounded-2xl"
          frameborder="0"
          allowfullscreen
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        ></iframe>
      </ng-container> -->

    <app-iframe [iframeUrl]="iframeUrl" [showIframe]="showIframe"></app-iframe>

    <app-controls
      [currentSourceUrl]="currentSourceUrl"
      [sources]="sources"
      [currentEpisode]="currentEpisode"
      [mediaType]="mediaType ?? 'tv'"
      (sourceChange)="onSourceChange($event)"
      (prevEpisodeClick)="prevEpisode(currentEpisode)"
      (nextEpisodeClick)="nextEpisode(currentEpisode)"
      (prevSourceClick)="prevSource()"
      (nextSourceClick)="nextSource()"
    ></app-controls>
  </div>

  <div
    class="w-full lg:w-1/4 flex flex-col bg-gray-50 rounded-xl border border-gray-200 lg:aspect-video"
  >
    <app-playlist
      *ngIf="mediaType == 'tv' && onClosePlaylist === false"
      [names]="names || ''"
      [totalSeasons]="totalSeasons"
      [currentSeason]="currentSeason"
      [currentEpisodes]="currentEpisodes"
      [currentPosters]="currentPosters"
      [layoutType]="layoutType"
      [isSortedAscending]="isSortedAscending"
      [activeEpisodeIndex]="activeEpisodeIndex"
      (seasonChange)="onSeasonChange($event)"
      (episodeSelected)="playEpisode($event)"
      (layoutChange)="changeLayout()"
      (sortToggle)="ascOrDescSort()"
      (close)="closePlaylist()"
      class="flex-1 overflow-hidden"
    ></app-playlist>
    <app-info
      *ngIf="
        mediaType == 'tv' ? onClosePlaylist == true : onClosePlaylist == false
      "
      class="flex-1 overflow-auto"
      [names]="names || ''"
      [currentSeason]="currentSeason"
      [currentEpisodes]="currentEpisodes"
      [currentPosters]="currentPosters"
      [responseData]="responseData"
      (close)="closePlaylist()"
      [mediaType]="mediaType ?? 'tv'"
    ></app-info>
  </div>
</div>
